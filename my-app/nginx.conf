server {
    listen 80;
    server_name localhost;

    # Set the root for all static files.
    # The Next.js build output is in /usr/share/nginx/html/.next/static
    # The 'root' directive is very important here.
    root /usr/share/nginx/html;

    # Handle static assets from the .next/static directory.
    # This location block is crucial for serving the JS, CSS, and fonts.
    location /_next/static/ {
        # The 'alias' directive is a common and robust way to handle this.
        # It maps the request URI directly to the specified directory.
        alias /usr/share/nginx/html/.next/static/;
        expires max; # A good practice for cache-busting filenames
        access_log off;
    }

    # Handle all other requests (the main application).
    # This serves the main index.html file for the SPA.
    location / {
        try_files $uri $uri/ /index.html;
    }
}